// Generated by CoffeeScript 1.6.3
var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};define(["EventEmitter","WatchJS","RAF"],function(e,t,n){var r;return r=function(e){function n(e,t,n,r){this.dataObject=e;this.template=t;this.container=n;this.options=r!=null?r:{};this.render=__bind(this.render,this);this.getHTML=__bind(this.getHTML,this);this.reRender=__bind(this.reRender,this);this.createWatcher=__bind(this.createWatcher,this);this.autoRender=this.options.autoRender||!0;this.append=this.options.appendOnInitialRender||!0;this.renderOnInit=this.options.renderOnInit||!0;this.el=null;this.autoRender&&this.createWatcher();this.renderOnInit&&this.render();this.needToRender=!1}__extends(n,e);n.prototype.createWatcher=function(){var e=this;return t.watch(this.dataObject,function(){return e.needToRender=!0})};n.prototype.reRender=function(){var e;if(this.needToRender){console.log("Rendering...");e=this.getHTML();this.el.replaceWith(e);this.el=e;this.emit("render",{el:this.el,rerender:!0});this.needToRender=!1}return window.requestAnimFrame(this.reRender)};n.prototype.getHTML=function(e){e==null&&(e=!0);return e?$(this.template(this.dataObject)):this.template(this.dataObject)};n.prototype.render=function(){this.el=this.getHTML();this.append===!0?this.container.append(this.el):this.container.html(this.el);this.emit("render",{el:this.el,rerender:!1});return this.reRender()};return n}(e)});