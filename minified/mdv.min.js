!function(){var WatchJS={noMore:false},lengthsubjects=[];var isFunction=function(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)=="[object Function]"};var isInt=function(x){return x%1===0};var isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var getObjDiff=function(a,b){var aplus=[],bplus=[];if(!(typeof a=="string")&&!(typeof b=="string")&&!isArray(a)&&!isArray(b)){for(var i in a){if(!b[i]){aplus.push(i)}}for(var j in b){if(!a[j]){bplus.push(j)}}}return{added:aplus,removed:bplus}};var clone=function(obj){if(null==obj||"object"!=typeof obj){return obj}var copy=obj.constructor();for(var attr in obj){copy[attr]=obj[attr]}return copy};var defineGetAndSet=function(obj,propName,getter,setter){try{Object.defineProperty(obj,propName,{get:getter,set:setter,enumerable:true,configurable:true})}catch(error){try{Object.prototype.__defineGetter__.call(obj,propName,getter);Object.prototype.__defineSetter__.call(obj,propName,setter)}catch(error2){throw new Error("watchJS error: browser not supported :/")}}};var defineProp=function(obj,propName,value){try{Object.defineProperty(obj,propName,{enumerable:false,configurable:true,writable:false,value:value})}catch(error){obj[propName]=value}};var watch=function(){if(isFunction(arguments[1])){watchAll.apply(this,arguments)}else if(isArray(arguments[1])){watchMany.apply(this,arguments)}else{watchOne.apply(this,arguments)}};var watchAll=function(obj,watcher,level,addNRemove){if(typeof obj=="string"||!(obj instanceof Object)&&!isArray(obj)){return}var props=[];if(isArray(obj)){for(var prop=0;prop<obj.length;prop++){props.push(prop)}}else{for(var prop2 in obj){props.push(prop2)}}watchMany(obj,props,watcher,level,addNRemove)};var watchMany=function(obj,props,watcher,level,addNRemove){if(typeof obj=="string"||!(obj instanceof Object)&&!isArray(obj)){return}for(var prop in props){watchOne(obj,props[prop],watcher,level,addNRemove)}};var watchOne=function(obj,prop,watcher,level,addNRemove){if(typeof obj=="string"||!(obj instanceof Object)&&!isArray(obj)){return}if(isFunction(obj[prop])){return}if(obj[prop]!=null&&(level===undefined||level>0)){if(level!==undefined){level--}watchAll(obj[prop],watcher,level)}defineWatcher(obj,prop,watcher);if(addNRemove){pushToLengthSubjects(obj,prop,watcher,level)}};var unwatch=function(){if(isFunction(arguments[1])){unwatchAll.apply(this,arguments)}else if(isArray(arguments[1])){unwatchMany.apply(this,arguments)}else{unwatchOne.apply(this,arguments)}};var unwatchAll=function(obj,watcher){if(obj instanceof String||!(obj instanceof Object)&&!isArray(obj)){return}var props=[];if(isArray(obj)){for(var prop=0;prop<obj.length;prop++){props.push(prop)}}else{for(var prop2 in obj){props.push(prop2)}}unwatchMany(obj,props,watcher)};var unwatchMany=function(obj,props,watcher){for(var prop2 in props){unwatchOne(obj,props[prop2],watcher)}};var defineWatcher=function(obj,prop,watcher){var val=obj[prop];watchFunctions(obj,prop);if(!obj.watchers){defineProp(obj,"watchers",{})}if(!obj.watchers[prop]){obj.watchers[prop]=[]}for(var i in obj.watchers[prop]){if(obj.watchers[prop][i]===watcher){return}}obj.watchers[prop].push(watcher);var getter=function(){return val};var setter=function(newval){var oldval=val;val=newval;if(obj[prop]){watchAll(obj[prop],watcher)}watchFunctions(obj,prop);if(!WatchJS.noMore){if(JSON.stringify(oldval)!==JSON.stringify(newval)){callWatchers(obj,prop,"set",newval,oldval);WatchJS.noMore=false}}};defineGetAndSet(obj,prop,getter,setter)};var callWatchers=function(obj,prop,action,newval,oldval){if(prop){for(var wr in obj.watchers[prop]){if(isInt(wr)){obj.watchers[prop][wr].call(obj,prop,action,newval||obj[prop],oldval)}}}else{for(var prop in obj){callWatchers(obj,prop,action,newval,oldval)}}};var methodNames=["pop","push","reverse","shift","sort","slice","unshift"];var defineArrayMethodWatcher=function(obj,prop,original,methodName){defineProp(obj[prop],methodName,function(){var response=original.apply(obj[prop],arguments);watchOne(obj,obj[prop]);if(methodName!=="slice"){callWatchers(obj,prop,methodName,arguments)}return response})};var watchFunctions=function(obj,prop){if(!obj[prop]||obj[prop]instanceof String||!isArray(obj[prop])){return}for(var i=methodNames.length,methodName;i--;){methodName=methodNames[i];defineArrayMethodWatcher(obj,prop,obj[prop][methodName],methodName)}};var unwatchOne=function(obj,prop,watcher){for(var i in obj.watchers[prop]){var w=obj.watchers[prop][i];if(w==watcher){obj.watchers[prop].splice(i,1)}}removeFromLengthSubjects(obj,prop,watcher)};var loop=function(){for(var i in lengthsubjects){var subj=lengthsubjects[i];var difference=getObjDiff(subj.obj[subj.prop],subj.actual);if(difference.added.length||difference.removed.length){if(difference.added.length){for(var j in subj.obj.watchers[subj.prop]){watchMany(subj.obj[subj.prop],difference.added,subj.obj.watchers[subj.prop][j],subj.level-1,true)}}callWatchers(subj.obj,subj.prop,"differentattr",difference,subj.actual)}subj.actual=clone(subj.obj[subj.prop])}};var pushToLengthSubjects=function(obj,prop,watcher,level){lengthsubjects.push({obj:obj,prop:prop,actual:clone(obj[prop]),watcher:watcher,level:level})};var removeFromLengthSubjects=function(obj,prop,watcher){for(var i in lengthsubjects){var subj=lengthsubjects[i];if(subj.obj==obj&&subj.prop==prop&&subj.watcher==watcher){lengthsubjects.splice(i,1)}}};setInterval(loop,50);WatchJS.watch=watch;WatchJS.unwatch=unwatch;WatchJS.callWatchers=callWatchers;return WatchJS};!function(exports){"use strict";function EventEmitter(){}var proto=EventEmitter.prototype,nativeIndexOf=Array.prototype.indexOf?true:false;function indexOfListener(listener,listeners){if(nativeIndexOf){return listeners.indexOf(listener)}var i=listeners.length;while(i--){if(listeners[i]===listener){return i}}return-1}proto._getEvents=function(){return this._events||(this._events={})};proto.getListeners=function(evt){var events=this._getEvents(),response,key;if(typeof evt==="object"){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key]}}}else{response=events[evt]||(events[evt]=[])}return response};proto.getListenersAsObject=function(evt){var listeners=this.getListeners(evt),response;if(listeners instanceof Array){response={};response[evt]=listeners}return response||listeners};proto.addListener=function(evt,listener){var listeners=this.getListenersAsObject(evt),key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listener,listeners[key])===-1){listeners[key].push(listener)}}return this};proto.on=proto.addListener;proto.defineEvent=function(evt){this.getListeners(evt);return this};proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i])}return this};proto.removeListener=function(evt,listener){var listeners=this.getListenersAsObject(evt),index,key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listener,listeners[key]);if(index!==-1){listeners[key].splice(index,1)}}}return this};proto.off=proto.removeListener;proto.addListeners=function(evt,listeners){return this.manipulateListeners(false,evt,listeners)};proto.removeListeners=function(evt,listeners){return this.manipulateListeners(true,evt,listeners)};proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==="object"&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==="function"){single.call(this,i,value)}else{multiple.call(this,i,value)}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i])}}return this};proto.removeEvent=function(evt){var type=typeof evt,events=this._getEvents(),key;if(type==="string"){delete events[evt]}else if(type==="object"){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key]}}}else{delete this._events}return this};proto.emitEvent=function(evt,args){var listeners=this.getListenersAsObject(evt),i,key,response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){response=args?listeners[key][i].apply(null,args):listeners[key][i]();if(response===true){this.removeListener(evt,listeners[key][i])}}}}return this};proto.trigger=proto.emitEvent;proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};if(typeof define==="function"&&define.amd){define(function(){return EventEmitter})}else{exports.EventEmitter=EventEmitter}}(this);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();var _this=this,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};window.ModelDrivenView=function(e){function t(e,n,r,i){var s=this;this.dataObject=e;this.template=n;this.container=r;this.options=i!=null?i:{};this.render=function(){return t.prototype.render.apply(s,arguments)};this.getHTML=function(e){e==null&&(e=!0);return t.prototype.getHTML.apply(s,arguments)};this.reRender=function(){return t.prototype.reRender.apply(s,arguments)};this.createWatcher=function(){return t.prototype.createWatcher.apply(s,arguments)};this.autoRender=this.options.autoRender||!0;this.append=this.options.appendOnInitialRender||!0;this.renderOnInit=this.options.renderOnInit||!0;this.el=null;this.autoRender&&this.createWatcher();this.renderOnInit&&this.render();this.needToRender=!1}__extends(t,e);t.prototype.createWatcher=function(){var e=this;return WatchJS.watch(this.dataObject,function(){return e.needToRender=!0})};t.prototype.reRender=function(){var e;if(this.needToRender){e=this.container.find(this.el);this.el=this.getHTML();e.replaceWith(this.el);this.emit("render",{el:this.el,rerender:!0});this.needToRender=!1}return window.requestAnimFrame(this.reRender)};t.prototype.getHTML=function(e){e==null&&(e=!0);return e?$(this.template(this.dataObject)):this.template(this.dataObject)};t.prototype.render=function(){this.el=this.getHTML();this.append?this.container.append(this.el):this.container.html(this.el);this.emit("render",{el:this.el,rerender:!1});return this.reRender()};return t}(window.EventEmitter);
//# sourceMappingURL=minified/mdv.min.js.map