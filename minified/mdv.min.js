!function(g){"object"===typeof exports?module.exports=g():"function"===typeof define&&define.amd?define(g):(window.WatchJS=g(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var g={noMore:!1},k=[],p=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},j=function(a){return"[object Array]"===Object.prototype.toString.call(a)},r=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),d;for(d in a)b[d]=a[d];return b},s=function(a,b,d){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:d})}catch(c){a[b]=d}},q=function(a,b,d,c){if(!("string"==typeof a||!(a instanceof Object)&&!j(a))){var e=[];if(j(a))for(var f=0;f<a.length;f++)e.push(f);else for(f in a)e.push(f);m(a,e,b,d,c)}},m=function(a,b,d,c,e){if(!("string"==typeof a||!(a instanceof Object)&&!j(a)))for(var f in b)n(a,b[f],d,c,e)},n=function(a,b,d,c,e){if(!("string"==typeof a||!(a instanceof Object)&&!j(a))&&!p(a[b])){if(null!=a[b]&&(void 0===c||0<c))void 0!==c&&c--,q(a[b],d,c);a:{var f=a[b];t(a,b);a.watchers||s(a,"watchers",{});a.watchers[b]||(a.watchers[b]=[]);for(var h in a.watchers[b])if(a.watchers[b][h]===d)break a;a.watchers[b].push(d);h=function(){return f};var u=function(c){var e=f;f=c;a[b]&&q(a[b],d);t(a,b);!g.noMore&&JSON.stringify(e)!==JSON.stringify(c)&&(l(a,b,"set",c,e),g.noMore=!1)};try{Object.defineProperty(a,b,{get:h,set:u,enumerable:!0,configurable:!0})}catch(m){try{Object.prototype.__defineGetter__.call(a,b,h),Object.prototype.__defineSetter__.call(a,b,u)}catch(n){throw Error("Browser Not Supported")}}}e&&k.push({obj:a,prop:b,actual:r(a[b]),watcher:d,level:c})}},y=function(a,b){if(!(a instanceof String||!(a instanceof Object)&&!j(a))){var d=[];if(j(a))for(var c=0;c<a.length;c++)d.push(c);else for(c in a)d.push(c);v(a,d,b)}},v=function(a,b,d){for(var c in b)w(a,b[c],d)},l=function(a,b,d,c,e){if(b)for(var f in a.watchers[b])0===f%1&&a.watchers[b][f].call(a,b,d,c||a[b],e);else for(b in a)l(a,b,d,c,e)},x="pop push reverse shift sort slice unshift".split(" "),z=function(a,b,d,c){s(a[b],c,function(){var e=d.apply(a[b],arguments);n(a,a[b]);"slice"!==c&&l(a,b,c,arguments);return e})},t=function(a,b){if(a[b]&&!(a[b]instanceof String)&&j(a[b]))for(var d=x.length,c;d--;)c=x[d],z(a,b,a[b][c],c)},w=function(a,b,d){for(var c in a.watchers[b])a.watchers[b][c]==d&&a.watchers[b].splice(c,1);for(var e in k)c=k[e],c.obj==a&&c.prop==b&&c.watcher==d&&k.splice(e,1)};setInterval(function(){for(var a in k){var b=k[a],d;d=b.obj[b.prop];var c=b.actual,e=[],f=[];if("string"!=typeof d&&"string"!=typeof c&&!j(d)&&!j(c)){var h=void 0;for(h in d)c[h]||e.push(h);h=void 0;for(h in c)d[h]||f.push(h)}d={added:e,removed:f};if(d.added.length||d.removed.length){if(d.added.length)for(var g in b.obj.watchers[b.prop])m(b.obj[b.prop],d.added,b.obj.watchers[b.prop][g],b.level-1,!0);l(b.obj,b.prop,"differentattr",d,b.actual)}b.actual=r(b.obj[b.prop])}},50);g.watch=function(){p(arguments[1])?q.apply(this,arguments):j(arguments[1])?m.apply(this,arguments):n.apply(this,arguments)};g.unwatch=function(){p(arguments[1])?y.apply(this,arguments):j(arguments[1])?v.apply(this,arguments):w.apply(this,arguments)};g.callWatchers=l;return g});("function"===typeof define&&function(a){define("EventEmitter",a)}||function(a){window.EventEmitter=a()})(function(){function a(){}a.prototype.on=function(e,a){this.hasOwnProperty("_handlers")||(this._handlers={});var b=this._handlers;b.hasOwnProperty(e)||(b[e]=[]);b[e].push(a)};a.prototype.addListener=a.prototype.on;a.prototype.once=function(a,c){function b(){this.off(a,c);this.off(a,b)}this.on(a,c);this.on(a,b)};a.prototype.emit=function(a){if(this.hasOwnProperty("_handlers")){var c=this._handlers;if(c.hasOwnProperty(a))for(var c=c[a],b=Array.prototype.slice.call(arguments,1),d=0,f=c.length;d<f;d++)c[d]&&c[d].apply(this,b)}};a.prototype.off=function(a,c){if(this.hasOwnProperty("_handlers")){var b=this._handlers;if(b.hasOwnProperty(a)){var b=b[a],d=b.indexOf(c);if(!(0>d)&&(b[d]=!1,d===b.length-1))for(;0<=d&&!b[d];)b.length--,d--}}};a.prototype.removeListener=a.prototype.off;return a});window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var _this=this,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};window.ModelDrivenView=function(e){function t(e,n,r,i){var s=this;this.dataObject=e;this.template=n;this.container=r;this.options=i!=null?i:{};this.render=function(){return t.prototype.render.apply(s,arguments)};this.reRender=function(){return t.prototype.reRender.apply(s,arguments)};this.createWatcher=function(){return t.prototype.createWatcher.apply(s,arguments)};this.autoRender=this.options.autoRender||!0;this.append=this.options.appendOnInitialRender||!0;this.renderOnInit=this.options.renderOnInit||!0;this.el=null;this.autoRender&&this.createWatcher();this.renderOnInit&&this.render();this.needToRender=!1}__extends(t,e);t.prototype.createWatcher=function(){var e=this;return WatchJS.watch(this.dataObject,function(){return e.needToRender=!0})};t.prototype.reRender=function(){var e;if(this.needToRender){e=this.container.find(this.el);this.el=$(this.template(this));e.replaceWith(this.el);this.emit("render",{el:this.el,rerender:!0});this.needToRender=!1}return window.requestAnimFrame(this.reRender)};t.prototype.render=function(){this.el=$(this.template(this));this.append?this.container.append(this.el):this.container.html(this.el);this.emit("render",{el:this.el,rerender:!1});return this.reRender()};return t}(window.EventEmitter);
//# sourceMappingURL=minified/mdv.min.js.map